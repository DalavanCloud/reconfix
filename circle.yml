machine:
  environment:
    PATH: "${HOME}/.cargo/bin:${PATH}"

dependencies:
  override:
    - curl https://sh.rustup.rs -sSf | sh -s -- -y
    - rustup update stable
    - rustup update nightly
    - rm ~/.gitconfig
    - cargo +nightly install --force rustfmt-nightly
test:
  override:
    - cargo clean
    - cargo +nightly fmt -- --write-mode=diff
    - cargo test --color=never --verbose
